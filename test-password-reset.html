<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Test Password Reset Page</title>
  <style>
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Arial, sans-serif;
      max-width: 800px;
      margin: 50px auto;
      padding: 20px;
      background: #f5f5f5;
    }
    .container {
      background: white;
      border-radius: 12px;
      padding: 32px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    }
    h1 {
      color: #10b981;
      margin-bottom: 24px;
    }
    .section {
      margin-bottom: 32px;
      padding: 20px;
      background: #f9fafb;
      border-radius: 8px;
      border-left: 4px solid #10b981;
    }
    .section h2 {
      margin-top: 0;
      color: #374151;
      font-size: 18px;
    }
    .test-url {
      background: #1f2937;
      color: #10b981;
      padding: 12px;
      border-radius: 6px;
      font-family: monospace;
      font-size: 12px;
      word-break: break-all;
      margin: 8px 0;
    }
    .button {
      background: #10b981;
      color: white;
      padding: 12px 24px;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      font-size: 14px;
      font-weight: 600;
      margin: 8px 8px 8px 0;
      text-decoration: none;
      display: inline-block;
    }
    .button:hover {
      background: #059669;
    }
    .status {
      padding: 12px;
      border-radius: 6px;
      margin: 8px 0;
    }
    .status.success {
      background: #d1fae5;
      color: #065f46;
      border: 1px solid #6ee7b7;
    }
    .status.error {
      background: #fee2e2;
      color: #991b1b;
      border: 1px solid #fecaca;
    }
    .status.info {
      background: #dbeafe;
      color: #1e40af;
      border: 1px solid #93c5fd;
    }
    ol, ul {
      margin: 12px 0;
      padding-left: 24px;
    }
    li {
      margin: 8px 0;
    }
    code {
      background: #e5e7eb;
      padding: 2px 6px;
      border-radius: 3px;
      font-family: monospace;
      font-size: 13px;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>üß™ Password Reset Testing Tool</h1>
    
    <div class="section">
      <h2>1Ô∏è‚É£ Quick Test - Open Reset Page</h2>
      <p>Click the button below to open the password reset page in a new tab:</p>
      <a href="reset-password.html" target="_blank" class="button">Open Reset Page (Local)</a>
      <a href="https://www.hellopoco.app/reset-password" target="_blank" class="button">Open Reset Page (Production)</a>
    </div>

    <div class="section">
      <h2>2Ô∏è‚É£ Test with Sample Tokens</h2>
      <p>To test the full flow with tokens, you need to simulate the URL that Supabase sends:</p>
      <div class="status info">
        <strong>Note:</strong> These are dummy tokens and won't actually work. To get real tokens, request a password reset from the app.
      </div>
      <p>Sample URL format:</p>
      <div class="test-url">
        https://www.hellopoco.app/reset-password#access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...&refresh_token=abc123...&type=recovery
      </div>
    </div>

    <div class="section">
      <h2>3Ô∏è‚É£ End-to-End Testing Steps</h2>
      <ol>
        <li><strong>Request Reset:</strong>
          <ul>
            <li>Open PoCo app</li>
            <li>Go to Sign In screen</li>
            <li>Enter your test email</li>
            <li>Tap "Forgot Password?"</li>
            <li>‚úÖ Should see "Reset Link Sent" alert</li>
          </ul>
        </li>
        
        <li><strong>Check Email:</strong>
          <ul>
            <li>Open your email inbox</li>
            <li>Look for "Reset Password" email</li>
            <li>‚úÖ Email should arrive within 1-2 minutes</li>
          </ul>
        </li>
        
        <li><strong>Click Link:</strong>
          <ul>
            <li>Click the reset link in email</li>
            <li>‚úÖ Should open <code>https://www.hellopoco.app/reset-password</code></li>
            <li>‚úÖ Page should load without errors</li>
          </ul>
        </li>
        
        <li><strong>Set Password:</strong>
          <ul>
            <li>Enter new password: <code>TestPass123!</code></li>
            <li>Confirm password: <code>TestPass123!</code></li>
            <li>‚úÖ Requirements should turn green</li>
            <li>Tap "Set New Password"</li>
            <li>‚úÖ Should see success message</li>
          </ul>
        </li>
        
        <li><strong>Sign In:</strong>
          <ul>
            <li>Return to PoCo app</li>
            <li>Sign in with new password</li>
            <li>‚úÖ Should successfully sign in</li>
          </ul>
        </li>
      </ol>
    </div>

    <div class="section">
      <h2>4Ô∏è‚É£ Checklist Before Going Live</h2>
      <p>Make sure these are complete:</p>
      <ul>
        <li>
          <input type="checkbox" id="check1">
          <label for="check1">Deploy <code>reset-password.html</code> to <code>https://www.hellopoco.app/reset-password</code></label>
        </li>
        <li>
          <input type="checkbox" id="check2">
          <label for="check2">Add redirect URL in Supabase Dashboard ‚Üí Authentication ‚Üí URL Configuration</label>
        </li>
        <li>
          <input type="checkbox" id="check3">
          <label for="check3">Verify email template in Supabase contains <code>{{ .ConfirmationURL }}</code></label>
        </li>
        <li>
          <input type="checkbox" id="check4">
          <label for="check4">Test password reset with real email</label>
        </li>
        <li>
          <input type="checkbox" id="check5">
          <label for="check5">Verify HTTPS/SSL is working on hellopoco.app</label>
        </li>
        <li>
          <input type="checkbox" id="check6">
          <label for="check6">Test on mobile device (tap link from email)</label>
        </li>
        <li>
          <input type="checkbox" id="check7">
          <label for="check7">Verify password requirements are enforced</label>
        </li>
        <li>
          <input type="checkbox" id="check8">
          <label for="check8">Test sign in with new password</label>
        </li>
      </ul>
    </div>

    <div class="section">
      <h2>5Ô∏è‚É£ Supabase Configuration</h2>
      <p>Required settings in your Supabase Dashboard:</p>
      
      <p><strong>Location:</strong> Authentication ‚Üí URL Configuration ‚Üí Redirect URLs</p>
      <p><strong>Add these URLs:</strong></p>
      <div class="test-url">https://www.hellopoco.app/reset-password</div>
      <div class="test-url">https://www.hellopoco.app/*</div>
      
      <p style="margin-top: 16px;"><strong>Current Supabase Project:</strong></p>
      <div class="test-url">https://derggkmbocosxcxhnwvf.supabase.co</div>
      
      <a href="https://supabase.com/dashboard/project/derggkmbocosxcxhnwvf/auth/url-configuration" target="_blank" class="button">
        Open Supabase Dashboard
      </a>
    </div>

    <div class="section">
      <h2>6Ô∏è‚É£ Troubleshooting</h2>
      
      <p><strong>‚ùå Page shows "Invalid or expired reset link"</strong></p>
      <ul>
        <li>Tokens expire after 1 hour - request new reset</li>
        <li>Link can only be used once</li>
        <li>Check browser console for errors</li>
      </ul>
      
      <p><strong>‚ùå 404 Error when clicking link</strong></p>
      <ul>
        <li>File not deployed to web server</li>
        <li>DNS not configured correctly</li>
        <li>Check URL matches: <code>https://www.hellopoco.app/reset-password</code></li>
      </ul>
      
      <p><strong>‚ùå JavaScript errors in console</strong></p>
      <ul>
        <li>Already fixed! ‚úÖ</li>
        <li>Clear browser cache and try again</li>
        <li>Verify Supabase CDN loaded (check Network tab)</li>
      </ul>
      
      <p><strong>‚ùå Password update fails</strong></p>
      <ul>
        <li>Verify password meets all requirements</li>
        <li>Check Supabase logs for errors</li>
        <li>Ensure user session is valid</li>
      </ul>
    </div>

    <div class="section">
      <h2>7Ô∏è‚É£ Quick Deployment Commands</h2>
      
      <p><strong>If using standard web server:</strong></p>
      <div class="test-url">cp public/reset-password.html /var/www/hellopoco.app/reset-password/index.html</div>
      
      <p><strong>If using Vercel:</strong></p>
      <div class="test-url">cd public && vercel --prod</div>
      
      <p><strong>If using Netlify:</strong></p>
      <div class="test-url">netlify deploy --dir=public --prod</div>
      
      <p><strong>If using GitHub Pages:</strong></p>
      <div class="test-url">git add public/reset-password.html && git commit -m "Add password reset" && git push</div>
    </div>

    <div class="section">
      <h2>‚úÖ Status</h2>
      <div class="status success">
        <strong>‚úÖ HTML File:</strong> Fixed and ready (JavaScript errors corrected)
      </div>
      <div class="status success">
        <strong>‚úÖ Supabase Config:</strong> Correct URL and key configured
      </div>
      <div class="status success">
        <strong>‚úÖ Password Validation:</strong> All requirements implemented
      </div>
      <div class="status success">
        <strong>‚úÖ UI/UX:</strong> Beautiful design with PoCo branding
      </div>
      <div class="status info">
        <strong>‚è≥ Deployment:</strong> Ready to deploy to production
      </div>
      <div class="status info">
        <strong>‚è≥ Supabase Settings:</strong> Need to add redirect URLs
      </div>
    </div>
  </div>

  <script>
    // Save checkbox states to localStorage
    document.querySelectorAll('input[type="checkbox"]').forEach(checkbox => {
      // Load saved state
      const saved = localStorage.getItem(checkbox.id);
      if (saved === 'true') {
        checkbox.checked = true;
      }
      
      // Save on change
      checkbox.addEventListener('change', () => {
        localStorage.setItem(checkbox.id, checkbox.checked);
      });
    });
  </script>
</body>
</html>

